YUI.add("moodle-availability_gps-form",function(e,t){M.availability_gps=M.availability_gps||{},M.availability_gps.vals=["accuracy","longitude","latitude","persistent","reveal","revealname"],M.availability_gps.form=e.Object(M.core_availability.plugin),M.availability_gps.form.initInner=function(e,t,n,r,i,s){console.log("initInner: ",e,t,n,r,i,s),require(["core/url"],function(e){var t,n;t=document.createElement("link"),t.href=e.relativeUrl("/blocks/gps/css/leaflet.css"),t.type="text/css",t.rel="stylesheet",t.media="screen,print",n=document.createElement("link"),n.href=e.relativeUrl("/blocks/gps/css/main.css"),n.type="text/css",n.rel="stylesheet",n.media="screen,print",document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("head")[0].appendChild(n)})},M.availability_gps.form.getNode=function(t){var n,r,i,s,o,u;u=M.str.availability_gps;for(n=0;n<M.availability_gps.vals.length;n++)t[M.availability_gps.vals[n]]||(t[M.availability_gps.vals[n]]=0);r='<div class="availability_gps">',r+="<div>"+u.notify_block+"</div>",r+='<input type="button" value="'+u.selectfrommap+'" class="ui-btn btn" onclick="',r+="    require(['block_gps/geoassist'], function(helper) {",r+="        helper.init("+t.latitude+","+t.longitude+");",r+='    });">',r+="<div>",r+="<label>"+u.longitude+' <input type="text" name="longitude" value="'+t.longitude+'"/></label>',r+="<label>"+u.latitude+' <input type="text" name="latitude" value="'+t.latitude+'"/></label>',r+="<label>"+u.accuracy+' <select name="accuracy">',i=[5,10,50,100,500,1e3];for(n=0;n<i.length;n++)o=t.accuracy==i[n]?" selected":"",r+='   <option value="'+i[n]+'"'+o+">"+i[n]+" "+u.meters+"</option>";r+="</select></label>",r+="</div>",r+="<div>",r+="<label>"+u.persistent+' <select name="persistent">',i=[0,1],s=[u.no,u.yes];for(n=0;n<i.length;n++)o=t.persistent==i[n]?" selected":"",r+='   <option value="'+i[n]+'"'+o+">"+s[n]+"</option>";r+="</select></label>",r+="<label>"+u.reveal+'<select name="reveal">',i=[0,1],s=[u.no,u.yes];for(n=0;n<i.length;n++)o=t.reveal==i[n]?" selected":"",r+='   <option value="'+i[n]+'"'+o+">"+s[n]+"</option>";r+="</select></label>",r+="<label>"+u.revealname+'<select name="revealname">',i=[0,1],s=[u.no,u.yes];for(n=0;n<i.length;n++)o=t.revealname==i[n]?" selected":"",r+='   <option value="'+i[n]+'"'+o+">"+s[n]+"</option>";return r+="</select></label>",r+="</div>",r+='<div id="availability_gps_map_info" class="closed">',r+=u.selectfrommapdrag,r+='<input type="button" value="'+u.current_location+'" onclick="',r+="    require(['block_gps/geoassist'], function(helper) {",r+="        helper.current(this);",r+='    });"',r+='    class="ui-btn btn" />',r+="</div>",r+='<div id="availability_gps_map" class="closed" style="height: 440px; border: 1px solid #AAA;">',r+="</div>",r+="</div>",M.availability_gps.node=e.Node.create(r),M.availability_gps.form.addedEvents||(M.availability_gps.form.addedEvents=!0,M.availability_gps.node.delegate("change",function(){M.core_availability.form.update()},"*[name]")),M.availability_gps.node},M.availability_gps.form.fillValue=function(e,t){var n,r;for(r=0;r<M.availability_gps.vals.length;r++)n=t.one("*[name="+M.availability_gps.vals[r]+"]"),n&&(e[M.availability_gps.vals[r]]=n.get("value"))}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});
