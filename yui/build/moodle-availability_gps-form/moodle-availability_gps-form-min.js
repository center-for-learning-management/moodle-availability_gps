YUI.add("moodle-availability_gps-form",function(d,e){M.availability_gps=M.availability_gps||{},M.availability_gps.vals=["accuracy","longitude","latitude","persistent","reveal","revealname"],M.availability_gps.form=d.Object(M.core_availability.plugin),M.availability_gps.form.initInner=function(e,i,t,a,s,l){console.log("initInner: ",e,i,t,a,s,l),this.nodesSoFar=0,require(["core/url"],function(e){var i,t=document.createElement("link");t.href=e.relativeUrl("/blocks/gps/css/leaflet.css"),t.type="text/css",t.rel="stylesheet",t.media="screen,print",(i=document.createElement("link")).href=e.relativeUrl("/blocks/gps/css/main.css"),i.type="text/css",i.rel="stylesheet",i.media="screen,print",document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("head")[0].appendChild(i)})},M.availability_gps.form.getNode=function(e){for(var i,t,a,s,l,o,n,p,c=M.str.availability_gps,r=0;r<M.availability_gps.vals.length;r++)e[M.availability_gps.vals[r]]||(e[M.availability_gps.vals[r]]=0);for(p=1==e.persistent?' checked="checked"':"",s=1==e.reveal?' checked="checked"':"",l=1==e.revealname?' checked="checked"':"",this.nodesSoFar++,(i=[]).push('<div class="availability_gps">'),i.push('    <div class="alert alert-info">'+c.notify_block+"</div>"),i.push('    <div class="row">'),i.push('        <div class="col-md-2">'),i.push('            <a href="#" onclick="require([\'block_gps/conditionassistant\'], function(helper) { helper.init(true);});; return false;" class="btn btn-secondary" style="text-align: center;">'),i.push('                <i class="fa fa-map" style="font-size: 30px; vertical-align: middle;"></i><br />'),i.push(c.selectfrommap),i.push("            </a>"),i.push("        </div>"),i.push('        <div class="col-md-5" style="display: flex;">'),i.push("            <table>"),i.push("                <tr>"),i.push("                    <td>"+c.latitude+"</td>"),i.push('                    <td><input type="text" name="latitude" value="'+e.latitude+'" size="18" style="width: 100%; max-width: 160px;"/></td>'),i.push("                </tr>"),i.push("                <tr>"),i.push("                    <td>"+c.longitude+"</td>"),i.push('                    <td><input type="text" name="longitude" value="'+e.longitude+'" size="18" style="width: 100%; max-width: 160px;"/></td>'),i.push("                </tr>"),i.push("                <tr>"),i.push("                    <td>"+c.accuracy+"</td>"),i.push('                    <td><select name="accuracy" style="width: 100%; max-width: 160px;">'),t=[5,10,50,100,500,1e3,5e3,1e4,2e4],o=["5"+(n=" "+c.meters),"10"+n,"50"+n,"100"+n,"500"+n,"1"+(n=" "+c.kilometers),"5"+n,"10"+n,"20"+n],r=0;r<t.length;r++)a=e.accuracy==t[r]?" selected":"",i.push('       <option value="'+t[r]+'"'+a+"> "+o[r]+"</option>");return i.push("                    </select></td>"),i.push("                </tr>"),i.push("            </table>"),i.push("        </div>"),i.push('        <div class="col-md-5">'),i.push('            <input name="persistent" type="checkbox"'+p+" /> "+c.persistent+"<br />"),i.push('            <input name="reveal" type="checkbox"'+s+" /> "+c.reveal+"<br />"),i.push('            <input name="revealname" type="checkbox"'+l+" /> "+c.revealname),i.push("        </div>"),i.push("    </div>"),i.push('    <div class="hidden" id="availability_gps_map" style="height: 440px; border: 1px solid #AAA;">'),i.push('        <div style="position: absolute; z-index: 999; right: 15px; top: 15px;">'),i.push('            <a href="#" onclick="require([\'block_gps/conditionassistant\'], function(helper) { helper.current(this); });; return false;" class="btn btn-secondary" style="color: unset;">'),i.push('                <i class="fa fa-map-marker"></i>&nbsp;'+c.current_location_set),i.push("            </a>"),i.push("        </div>"),i.push("    </div>"),i.push("</div>"),n=d.Node.create(i.join("")),M.availability_gps.form.addedEvents||(M.availability_gps.form.addedEvents=!0,(p=d.one("#fitem_id_availabilityconditionsjson")).delegate("change",function(){M.core_availability.form.update(),require(["block_gps/conditionassistant"],function(e){e.initIfShown()})},".availability_gps select"),p.delegate("click",function(){M.core_availability.form.update(),require(["block_gps/conditionassistant"],function(e){e.initIfShown()})},".availability_gps input[type=checkbox]"),p.delegate("valuechange",function(){M.core_availability.form.update(),require(["block_gps/conditionassistant"],function(e){e.initIfShown()})},".availability_gps input")),M.availability_gps.node=n},M.availability_gps.form.fillValue=function(e,i){for(var t,a,s=0;s<M.availability_gps.vals.length;s++)a=M.availability_gps.vals[s],t=i.one("*[name="+a+"]"),-1<["persistent","reveal","revealname"].indexOf(a)?e[a]=t.get("checked")?1:0:t&&(e[a]=t.get("value"))}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});