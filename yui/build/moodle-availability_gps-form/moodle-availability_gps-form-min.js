M.availability_gps=M.availability_gps||{};M.availability_gps.vals=["accuracy","longitude","latitude","persistent","reveal","revealname"];M.availability_gps.form=Y.Object(M.core_availability.plugin);M.availability_gps.form.initInner=function(c,f,e,a,d,b){console.log("initInner: ",c,f,e,a,d,b);require(["core/url"],function(i){var h,g;h=document.createElement("link");h.href=i.relativeUrl("/blocks/gps/css/leaflet.css");h.type="text/css";h.rel="stylesheet";h.media="screen,print";g=document.createElement("link");g.href=i.relativeUrl("/blocks/gps/css/main.css");g.type="text/css";g.rel="stylesheet";g.media="screen,print";document.getElementsByTagName("head")[0].appendChild(h);document.getElementsByTagName("head")[0].appendChild(g)})};M.availability_gps.form.getNode=function(j){var h,f,k,g,d,i;i=M.str.availability_gps;for(h=0;h<M.availability_gps.vals.length;h++){if(!j[M.availability_gps.vals[h]]){j[M.availability_gps.vals[h]]=0}}f='<div class="availability_gps">';f+="<div>"+i.notify_block+"</div>";f+='<input type="button" value="'+i.selectfrommap+'" class="ui-btn btn" onclick="';f+="    require(['block_gps/geoassist'], function(helper) {";f+="        helper.init("+j.latitude+","+j.longitude+");";f+='    });">';f+="<div>";f+="<label>"+i.latitude+' <input type="text" name="latitude" value="'+j.latitude+'"/></label>';f+="<label>"+i.longitude+' <input type="text" name="longitude" value="'+j.longitude+'"/></label>';f+="<label>"+i.accuracy+' <select name="accuracy">';var k=[5,10,50,100,500,1000,5000,10000,20000];var b=" "+i.meters;var c=" "+i.kilometers;var e=["5"+b,"10"+b,"50"+b,"100"+b,"500"+b,"1"+c,"5"+c,"10"+c,"20"+c];for(h=0;h<k.length;h++){d=((j.accuracy==k[h])?" selected":"");f+='   <option value="'+k[h]+'"'+d+"> "+e[h]+"</option>"}f+="</select></label>";f+="</div>";f+="<div>";f+="<label>"+i.persistent+' <select name="persistent">';k=[0,1];g=[i.no,i.yes];for(h=0;h<k.length;h++){d=((j.persistent==k[h])?" selected":"");f+='   <option value="'+k[h]+'"'+d+">"+g[h]+"</option>"}f+="</select></label>";f+="<label>"+i.reveal+'<select name="reveal">';k=[0,1];g=[i.no,i.yes];for(h=0;h<k.length;h++){d=((j.reveal==k[h])?" selected":"");f+='   <option value="'+k[h]+'"'+d+">"+g[h]+"</option>"}f+="</select></label>";f+="<label>"+i.revealname+'<select name="revealname">';k=[0,1];g=[i.no,i.yes];for(h=0;h<k.length;h++){d=((j.revealname==k[h])?" selected":"");f+='   <option value="'+k[h]+'"'+d+">"+g[h]+"</option>"}f+="</select></label>";f+="</div>";f+='<div id="availability_gps_map_info" class="closed">';f+=i.selectfrommapdrag;f+='<input type="button" value="'+i.current_location+'" onclick="';f+="    require(['block_gps/geoassist'], function(helper) {";f+="        helper.current(this);";f+='    });"';f+='    class="ui-btn btn" />';f+="</div>";f+='<div id="availability_gps_map" class="closed" style="height: 440px; border: 1px solid #AAA;">';f+="</div>";f+="</div>";M.availability_gps.node=Y.Node.create(f);if(!M.availability_gps.form.addedEvents){M.availability_gps.form.addedEvents=true;M.availability_gps.node.delegate("change",function(){M.core_availability.form.update()},"*[name]")}return M.availability_gps.node};M.availability_gps.form.fillValue=function(e,d){var c,b;for(b=0;b<M.availability_gps.vals.length;b++){c=d.one("*[name="+M.availability_gps.vals[b]+"]");if(c){e[M.availability_gps.vals[b]]=c.get("value")}}};